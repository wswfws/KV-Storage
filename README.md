# KV-Storage

**KV-Storage** — это распределённое хранилище данных типа «ключ-значение», предоставляющее высокую надёжность, масштабируемость и удобство работы. Система подходит для сценариев, где требуется надёжное хранение данных, репликация, а также работа с большими объёмами информации.

---

## Возможности и особенности

- **Распределённая архитектура:** данные равномерно распределяются между узлами системы.
- **Сетевая реализация:** взаимодействие с хранилищем осуществляется через HTTP API.
- **Устойчивость к перезапуску:** данные сохраняются между запусками благодаря использованию файловой системы.
- **Поддержка больших данных:** работа с объёмами данных, не помещающимися в память.
- **Репликация данных:** резервное копирование для повышения отказоустойчивости.
- **Масштабируемость:** поддержка нескольких экземпляров хранилища для увеличения пропускной способности.
- **Обширное тестирование:** система протестирована на различных сценариях использования.
- **Эффективность:** оптимизированные алгоритмы поиска ключей и хранения данных.

---

## Установка

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/wswfws/kv-storage.git
   ```
2. Установите зависимости:
   ```bash
   pip install -r req.txt
   ```
3. Запустите сервер:
   ```bash
   python server.py
   ```
4. Для тестирования локального клиента выполните:
   ```bash
   python client.py
   ```

---

## API

### `POST /add_value`
Добавление значения в хранилище.

**Параметры:**
- `key` (строка) — ключ.
- `value` (строка) — значение.
- `finish_value` (логическое) — завершён ли ввод значения.
- `user` (объект) — информация о пользователе.

**Пример запроса:**
```json
{
  "key": "example",
  "value": "some data",
  "finish_value": true,
  "user": {
    "user_id": "123",
    "password_hash": "abc123"
  }
}
```

---

### `POST /get_value`
Получение значения из хранилища.

**Параметры:**
- `key` (строка) — ключ.
- `user` (объект) — информация о пользователе.

**Пример запроса:**
```json
{
  "key": "example",
  "user": {
    "user_id": "123",
    "password_hash": "abc123"
  }
}
```

**Пример ответа:**
```json
{
  "key": "example",
  "value": ["some data"]
}
```

---

### `POST /clear_key`
Удаление значения по ключу.

**Параметры:**
- `key` (строка) — ключ.
- `user` (объект) — информация о пользователе.

**Пример запроса:**
```json
{
  "key": "example",
  "user": {
    "user_id": "123",
    "password_hash": "abc123"
  }
}
```

---

## Тестирование

- Запуск автоматических тестов:
  ```bash
  pytest tests/
  ```
- Убедитесь, что все узлы и экземпляры хранилища работают корректно перед началом тестов.

---

## Использование

```python
import asyncio
from client import add_value, get_value, clear_key

async def main():
    # Добавление значения
    await add_value("key", "value")

    # Получение значения
    value = await get_value("key")
    print("Value:", value)

    # Очистка ключа
    await clear_key("key")

asyncio.run(main())
```

---

## Дополнительно

- Поддержка частичных значений для сборки данных по частям.
- Автоматическая синхронизация данных между узлами.
- Валидация пользователей на каждом запросе.

---

## Авторы

- **Данил Еценков** 